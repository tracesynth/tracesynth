===== TSO_0: uniqueness experiment =====

----- Generating TSO_0... -----

Tests: 16
  positive: 13
  negative: 3

Sketch state space: 2^624

Synthesizing...

Synthesis complete!
time: 841 ms
tests used: 5/16

solution: ppo: (& po (+ (- (-> Writes Writes) (& (join loc (~ loc)) (-> Atomics Atomics))) (+ (+ (-> Reads MemoryEvent) (& (join loc (~ loc)) (-> Atomics Atomics))) (-> (- Atomics Writes) Atomics))))
          grf: rf
           ab: (-> none none)

Verifying solution...
Verified 16 litmus tests


----- Making TSO_0 unique... -----
Litmus test sketch:
  Up to 4 threads, with up to 6 total instructions.

Making model unique...
New distinguishing test [#1]:
Test disambig0
=============================
P0            | P1           
-----------------------------
r1 <- [A]     | LOCK [B] <- 1
r2 <- [B]     | [A] <- 1     
=============================
r1=1 /\ r2=0
Allowed by oracle? #f

New distinguishing test [#2]:
Test disambig1
=============================
P0            | P1           
-----------------------------
r1 <- [A]     | [B] <- 1     
r2 <- [B]     | LOCK [A] <- 1
=============================
r1=1 /\ r2=0
Allowed by oracle? #f

New distinguishing test [#3]:
Test disambig2
=============================
P0            | P1           
-----------------------------
r1 <- [A]     | LOCK [B] <- 1
r2 <- [B]     | LOCK [A] <- 1
=============================
r1=1 /\ r2=0
Allowed by oracle? #f

New distinguishing test [#4]:
Test disambig3
=============================
P0            | P1           
-----------------------------
r1 <- [B]     | r2 <- [A]    
LOCK [A] <- 1 | [B] <- 1     
=============================
r1=1 /\ r2=1
Allowed by oracle? #f

New distinguishing test [#5]:
Test disambig4
=============================
P0            | P1           
-----------------------------
LOCK [A] <- 1 | LOCK [B] <- 1
r1 <- [B]     | r2 <- [A]    
=============================
r1=0 /\ r2=0
Allowed by oracle? #f

New distinguishing test [#6]:
Test disambig5
=============================
P0            | P1           
-----------------------------
[A] <- 1      | LOCK [B] <- 1
r1 <- [A]     | r3 <- [A]    
r2 <- [B]     |              
=============================
r1=1 /\ r2=0 /\ r3=0
Allowed by oracle? #t

New distinguishing test [#7]:
Test disambig6
=============================
P0            | P1           
-----------------------------
[A] <- 1      | LOCK [B] <- 1
sync          | r2 <- [A]    
r1 <- [B]     |              
=============================
r1=0 /\ r2=0
Allowed by oracle? #f


Model is now unique!
time: 8364388 ms
new tests: 7

solution: ppo: (& po (- (+ (-> (+ Atomics Reads) (- MemoryEvent Syncs)) (- po (-> Writes Reads))) (& (join loc (~ loc)) (-> (& Atomics Reads) (& Atomics Reads)))))
          grf: (& rf (& (join loc (~ loc)) (- rf (join proc (~ proc)))))
           ab: (-> none none)
